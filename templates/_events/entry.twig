{% extends "_core/LayoutMaster" %}

{# Static caching #}
{% set shouldCache = true %}

{# No Indexing #}
{% set noIndex = entry.searchEngineIndexing != 1 %}

{# Meta Title #}
{% if craft.app.request.getSegment(1) %}
    {% set metaTitle = entry.seoTitle|default(entry.title) %}
{% else %}
    {% set metaTitle = entry.seoTitle %}
{% endif %}

{# Meta description #}
{% set metaDescription = entry.seoDescription %}

{# Custom share image #}
{% set shareImageAsset = entry.customShareImage.one() %}
{% if shareImageAsset %}
    {% set shareImage = shareImageAsset.getUrl({
        width: min(1000, shareImageAsset.width)
    }) %}
{% endif %}

{# Hero Image #}
{% set heroImageAsset = entry.heroImage.one() %}

{# Hero heading #}
{% set heroHeading = entry.heroHeading|default(entry.title) %}

{# Hero subheading #}
{% set heroSubheading = entry.heroSubheading %}

{# Primary content #}
{% block content %}
    <section class="BasicBlock">
        <div class="BasicBlock__Inner">
            <a href="/events">&laquo; back to events listing</a>
            <br><br><br>
            <div>
                {% set primaryImageAsset = entry.primaryImage.one() %}
                {% if primaryImageAsset %}
                    <div class="BasicBlock__ImgFloat">
                        <picture>
                            {% set primaryImageStandard = primaryImageAsset.getUrl({
                                width: 300
                            }) %}
                            {% set primaryImageRetina = primaryImageAsset.getUrl({
                                width: 600
                            }) %}
                            <img
                                src="{{ primaryImageStandard }}"
                                srcset="{{ primaryImageStandard }} 1x,
                                        {{ primaryImageRetina }} 2x"
                                alt="{{ entry.title|smartypants }}"
                                class="BasicBlock__ImgFloatImage"
                            >
                        </picture>
                    </div>
                {% endif %}
                <div class="BasicBlock__Headings">
                    <h2 class="BasicBlock__Heading">
                        {{ entry.title|typeset }}
                    </h2>
                    <h3 class="BasicBlock__SubHeading BasicBlock__SubHeading--IsSmall">
                        {% if entry.allDayEvent %}
                            {% set startDateString = entry.startDate|date('F j, Y') %}
                            {% set endDateString = entry.endDate|date('F j, Y') %}
                            {{ startDateString }}{% if startDateString != endDateString %} &mdash; {{ endDateString }}{% endif %}
                        {% else %}
                            {% set startDateString = entry.startDate|date('F j, Y') %}
                            {% set startDateHM = entry.startDate|date('g:i a') %}
                            {% set endDateString = entry.endDate|date('F j, Y') %}
                            {% set endDateHM = entry.endDate|date('g:i a') %}
                            {{ startDateString }}, {{ startDateHM }}
                            {% if startDateString != endDateString or startDateHM != endDateHM %}
                                &mdash; {% if startDateString != endDateString %}{{ endDateString }}, {% endif %}{{ endDateHM }}
                            {% endif %}
                        {% endif %}
                    </h3>
                </div>
                {% set theBody = entry.body|striptags|trim %}
                {% if theBody|length > 1 %}
                    <div class="BasicBlock__Content">
                        <div class="BasicBlock__Body">
                            {{ entry.body|typeset }}
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </section>
{% endblock %}
