{% set galleryAssets = entry.gallery.all() %}

<div class="GalleryShowcase__Gallery">

    {% if galleryAssets|length > 0 %}
        <div class="GalleryShowcase__GalleryBackground JSGalleryShowcaseBackground">
            {% for asset in galleryAssets %}
                {% set uniqueId = uniqueId() %}
                <div
                    class="GalleryShowcase__GalleryBackgroundImage GalleryShowcase__GalleryBackgroundImage--{{ uniqueId }} JSGalleryShowcaseBackground__Image{% if loop.first %} GalleryShowcase__GalleryBackgroundImage--IsActive JSGalleryShowcaseBackground__Image--IsActive{% endif %}"
                    data-active-class="GalleryShowcase__GalleryBackgroundImage--IsActive"
                >
                    {% set imager500 = craft.imager.transformImage(asset, {
                        allowUpscale: false,
                        width: 500,
                    }) %}
                    {% set imager800 = craft.imager.transformImage(asset, {
                        allowUpscale: false,
                        width: 800,
                    }) %}
                    {% set imager1000 = craft.imager.transformImage(asset, {
                        allowUpscale: false,
                        width: 1000,
                    }) %}
                    {% set imager1600 = craft.imager.transformImage(asset, {
                        allowUpscale: false,
                        width: 1600,
                    }) %}
                    {% set imager1920 = craft.imager.transformImage(asset, {
                        allowUpscale: false,
                        width: 1920,
                    }) %}
                    {% set imager3840 = craft.imager.transformImage(asset, {
                        allowUpscale: false,
                        width: 3840,
                    }) %}
                    <style type="text/css">
                        .GalleryShowcase__GalleryBackgroundImage--{{ uniqueId }} {
                            background-image: url("{{ imager500.url }}");
                        }
                        @media (min-width: 500px) {
                            .GalleryShowcase__GalleryBackgroundImage--{{ uniqueId }} {
                                background-image: url("{{ imager800.url }}");
                            }
                        }
                        @media (min-width: 1600px) {
                            .GalleryShowcase__GalleryBackgroundImage--{{ uniqueId }} {
                                background-image: url("{{ imager1920.url }}");
                            }
                        }
                        @media (-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 200dpi), (min-resolution: 1.3dppx) {
                            .GalleryShowcase__GalleryBackgroundImage--{{ uniqueId }} {
                                background-image: url("{{ imager1000.url }}");
                            }
                            @media (min-width: 500px) {
                                .GalleryShowcase__GalleryBackgroundImage--{{ uniqueId }} {
                                    background-image: url("{{ imager1600.url }}");
                                }
                            }
                            @media (min-width: 1600px) {
                                .GalleryShowcase__GalleryBackgroundImage--{{ uniqueId }} {
                                    background-image: url("{{ imager3840.url }}");
                                }
                            }
                        }
                    </style>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <div class="GalleryShowcase__GalleryInner">
        <h2 class="GalleryShowcase__GalleryTitle">{{ entry.title|typeset }}</h2>
        <a href="{{ entry.url }}" class="button">View&nbsp;Gallery</a>
    </div>
</div>
